# Root includes for all Nimbus Makefiles

ifeq ($(findstring darwin, $(OSTYPE)), darwin) 
  OS_DARWIN=TRUE
else
ifeq ($(findstring Darwin, $(shell uname)), Darwin)
  OS_DARWIN=TRUE  
endif
endif

ifeq ($(OSTYPE), linux)
  LDFLAGS += -Wl,-rpath=$(LDIR)
  OS_LINUX=TRUE
endif

CPP = g++
CPP_FLAGS = -Wall -g -pg 
ifdef OS_DARWIN
  CPP_FLAGS += -Wl,-no_implicit_dylibs
endif

IFLAGS = -I/opt/local/include
LFLAGS = 
LDFLAGS = -L/opt/local/lib -L${NIMBUS_ROOT}/lib/

ifdef OS_LINUX
  LDFLAGS += -Wl,-rpath=$(LDIR)
endif



NIMBUS_CCLINT = ${NIMBUS_ROOT}/tools/cpplint.py
NIMBUS_FILENAMES = ${NIMBUS_ROOT}/tools/cppfiles.sh

fcheck:
	@${NIMBUS_FILENAMES}

lint:
	@${NIMBUS_CCLINT} *.h *.cc

check: fcheck lint

clean-files:
	\rm -f *.o *~ \#*

